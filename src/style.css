:root {
  --bgColor: rgb(236, 235, 245);
  --bgColorLight: hsla(242, 86%, 24%, 1);
  --textColor: hsla(242, 86%, 88%, 1);
  --textColorDark: rgb(79, 19, 19);
  --paperColor: rgb(255, 255, 255);
  --paperColorDark: rgb(148, 147, 173);
  --shadowColorFaint: hsla(0, 0%, 0%, 0.2);
  --buttonColor: #4a90e2;
  --buttonHoverColor: #357ab8;
  --sliderColor: #4a90e2;
  --neonBlue: #00ffff;
  --neonPink: #ff00ff;
  --neonGreen: #00ff00;
}

/* Base Styles */
html,
body {
  background: linear-gradient(135deg, var(--bgColor), var(--bgColorLight));
  color: var(--textColor);
  font-family: "Saira", sans-serif;
  height: 100vh;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100vw;
  position: relative;
}

* {
  box-sizing: border-box;
  transition: all 0.12s cubic-bezier(0.42, 0.54, 0.22, 1.26);
}

/* Canvas */
canvas {
  display: block !important;
  width: 100vw !important;
  height: 100vh !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  z-index: 1 !important;
}

/* File Input */
label.file {
  background: var(--paperColor);
  border-radius: 4px;
  box-shadow: 0 20px 60px var(--shadowColorFaint);
  color: var(--textColor);
  cursor: pointer;
  display: inline-block;
  font-size: clamp(1rem, 4vw, 1.5rem);
  font-weight: 700;
  left: 50%;
  padding: clamp(1rem, 4vw, 2rem) clamp(1.5rem, 6vw, 3rem);
  position: fixed;
  top: 15%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  transition: all 0.3s ease;
  max-width: 90vw;
  text-align: center;
}

label.file:hover {
  background: var(--bgColor);
  transform: translate(-50%, -55%);
}

#mainFile {
  height: 0.1px;
  opacity: 0;
  overflow: hidden;
  position: absolute;
  width: 0.1px;
  z-index: 5;
}

/* Audio Controls */
audio {
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  position: fixed;
  width: calc(100vw - 20px);
  max-width: 600px;
  background: var(--paperColor);
  border-radius: 5px;
  box-shadow: 0 2px 10px var(--shadowColorFaint);
  padding: 10px;
  z-index: 1000;
}

/* Frequency Bands Display */
#frequency-bands {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: rgba(0, 0, 0, 0.7);
  padding: 15px;
  border-radius: 10px;
  backdrop-filter: blur(10px);
}

.frequency-band {
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.frequency-band label {
  color: white;
  font-size: 12px;
  font-weight: bold;
  min-width: 50px;
}

.frequency-bar {
  width: 100px;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
  overflow: hidden;
}

.frequency-fill {
  height: 100%;
  width: 0%;
  transition: width 0.1s ease;
  border-radius: 4px;
}

.bass-fill {
  background: linear-gradient(90deg, #ff0000, #ff6600);
}

.mid-fill {
  background: linear-gradient(90deg, #00ff00, #66ff00);
}

.treble-fill {
  background: linear-gradient(90deg, #0000ff, #0066ff);
}

/* Beat Indicator */
.beat-indicator {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  background: var(--neonBlue);
  border-radius: 50%;
  opacity: 0;
  z-index: 999;
  transition: all 0.1s ease;
}

.beat-indicator.beat {
  opacity: 1;
  transform: translate(-50%, -50%) scale(2);
  box-shadow: 0 0 20px var(--neonBlue);
}

/* Loading Screen */
.loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, var(--bgColor), var(--bgColorLight));
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

.loading.hidden {
  opacity: 0;
  pointer-events: none;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top: 3px solid var(--neonBlue);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.loading p {
  color: var(--textColor);
  font-size: 1.2rem;
  margin: 0;
}

/* dat.GUI Responsive */
.dg.main {
  position: fixed !important;
  top: 10px !important;
  right: 10px !important;
  z-index: 1001 !important;
  max-width: calc(100vw - 20px) !important;
}

/* Theme Classes */
.theme-neon {
  --bgColor: #000011;
  --bgColorLight: #001122;
  --textColor: #00ffff;
  --paperColor: rgba(0, 255, 255, 0.1);
  --paperColorDark: rgba(0, 255, 255, 0.2);
}

.theme-fire {
  --bgColor: #330000;
  --bgColorLight: #660000;
  --textColor: #ff4400;
  --paperColor: rgba(255, 68, 0, 0.1);
  --paperColorDark: rgba(255, 68, 0, 0.2);
}

.theme-ocean {
  --bgColor: #001133;
  --bgColorLight: #002266;
  --textColor: #0088ff;
  --paperColor: rgba(0, 136, 255, 0.1);
  --paperColorDark: rgba(0, 136, 255, 0.2);
}

.theme-sunset {
  --bgColor: #332200;
  --bgColorLight: #664400;
  --textColor: #ff8800;
  --paperColor: rgba(255, 136, 0, 0.1);
  --paperColorDark: rgba(255, 136, 0, 0.2);
}

.theme-rainbow {
  --bgColor: #000000;
  --bgColorLight: #111111;
  --textColor: #ffffff;
  --paperColor: rgba(255, 255, 255, 0.1);
  --paperColorDark: rgba(255, 255, 255, 0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  label.file {
    top: 20%;
    font-size: 1.2rem;
    padding: 1.5rem 2rem;
    width: 85vw;
  }

  audio {
    bottom: 5px;
    width: calc(100vw - 10px);
    padding: 8px;
  }

  #frequency-bands {
    top: 10px;
    left: 10px;
    padding: 10px;
    font-size: 10px;
  }

  .frequency-bar {
    width: 80px;
    height: 6px;
  }

  .dg.main {
    width: 280px !important;
    right: 5px !important;
    top: 5px !important;
  }
}

@media (max-width: 480px) {
  label.file {
    font-size: 1rem;
    padding: 1rem 1.5rem;
    top: 25%;
    width: 90vw;
  }

  #frequency-bands {
    padding: 8px;
  }

  .frequency-bar {
    width: 60px;
    height: 5px;
  }

  .dg.main {
    width: 250px !important;
    font-size: 11px !important;
  }
}

/* Landscape mobile */
@media (max-height: 500px) and (orientation: landscape) {
  label.file {
    top: 10%;
    font-size: 0.9rem;
    padding: 0.8rem 1.2rem;
  }

  audio {
    bottom: 3px;
    padding: 5px;
  }

  #frequency-bands {
    top: 5px;
    left: 5px;
    padding: 5px;
  }
}

/* Button Styles */
button,
input[type="range"] {
  position: fixed;
  z-index: 10;
  margin: 10px;
  border: none;
  border-radius: 5px;
  padding: 10px 15px;
  font-size: 1em;
  color: white;
  background-color: var(--buttonColor);
  cursor: pointer;
  transition: background-color 0.3s;
}

button:hover {
  background-color: var(--buttonHoverColor);
}

input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 200px;
  height: 5px;
  background: #ddd;
  border-radius: 5px;
  outline: none;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: var(--sliderColor);
  cursor: pointer;
}

input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: var(--sliderColor);
  cursor: pointer;
}
